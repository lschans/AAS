/*
 * Client info module
 *
 * Description:  Gather as much info as we can about the client
 *-----------------------------------------------------
 * Author: Lars van der Schans
 * Email:  lars@wodanbrothers.com
 *-----------------------------------------------------
 */

var config = {},
    MobileDetect = require('mobile-detect');

module.exports = function(server) {
    config = server.config;

    return {
        getInfo : function(request, response, callback) {
            // Gather client info to work with
            var md = new MobileDetect(request.headers['user-agent']);

            request.clientInfo = {};
            request.clientInfo.mobile = md.mobile();
            request.clientInfo.phone = md.phone();
            request.clientInfo.tablet = md.tablet();
            request.clientInfo.ua = md.userAgent();
            request.clientInfo.os = md.os();
            request.clientInfo.bot = md.is('bot');
            request.clientInfo.webkit = md.version('Webkit');
            request.clientInfo.build = md.versionStr('Build');
            callback(request, response);
        }
    }
}

