/*
 * Add some debug info to the end of the body
 *
 * Description:  Awesome debug adder
 *-----------------------------------------------------
 * Author: Lars van der Schans
 * Email:  lars@wodanbrothers.com
 *-----------------------------------------------------
 */

module.exports = function(config) {
    return {
        addInfo : function(request, response, callback) {
            response.body += '<fieldset><legend>Header information:</legend><pre>';
            response.body += 'REQ-URL: ' + request.url + '\n';
            response.body += 'METHOD: ' + request.method + '\n';
            response.body += JSON.stringify(request.headers, true, 2) ;
            response.body += '</pre></fieldset>';
            callback(request, response);
        },
        addForm : function (request, response, callback) {
            response.body = '<form action="/" id="myForm">' +
            '<fieldset>' +
            '<legend>Personal information:</legend>' +
            'First name:<br>' +
            '<input type="text" name="firstname" value="Mickey">' +
            '<br>' +
            'Last name:<br>' +
            '<input type="text" name="lastname" value="Mouse">' +
            '<br><br>' +
            '<button onclick=\'myform = document.getElementById("myForm"); myform.method = "post"; myform.submit();\'>POST</button>' +
            '<button onclick=\'myform = document.getElementById("myForm"); myform.method = "get"; myform.submit();\'>GET</button>' +
            '</fieldset>' +
            '</form><hr>';
            callback(request, response);
        }
    }
}