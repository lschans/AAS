/*
 * Helper functions for angular-server-with-sockets
 *
 * Description:  A bundle with helper functions
 *-----------------------------------------------------
 * Author: Lars van der Schans
 * Email:  lars@wodanbrothers.com
 *-----------------------------------------------------
 */

module.exports = function(config) {
    return {
        randomString : function (bits) {
            var rand,i,ret;
            ret='';
            // Round bits to 6 char multiply
            if(bits < 6) {
                bits = 6;
            } else {
                bits -= bits%6;
            }

            // in v8, Math.random() yields 32 pseudo-random bits
            while(bits > 0) {
                rand = Math.floor(Math.random() * 0x100000000); // 32-bit integer
                // base 64 means 6 bits per character, so we use the top 30 bits from rand to give 30/6=5 characters.
                for (i = 26; i > 0 && bits > 0; i -= 6, bits -= 6) {
                    ret += config.helpers.randomChars[0x3F & rand >>> i];
                }
            }
            return ret;
        },
        giveA : function() {
            return "a";
        }
    };
}